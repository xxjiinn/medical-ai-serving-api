# 데이터 사전 (Data Dictionary)

작성일: 2026-02-17
데이터 소스: 국민건강보험공단(NHIS) 건강검진정보 2024

---

## 1. 개요

### 데이터 출처

- **제공**: 국민건강보험공단
- **연도**: 2024년
- **형식**: CSV (cp949 인코딩)
- **라이선스**: 이용허락범위 제한 없음
- **파일명**: `국민건강보험공단_건강검진정보_2024.CSV`

### 데이터 특징

- **총 컬럼**: 33개
- **개인정보**: 비식별화 처리됨 (가입자일련번호는 surrogate key)
- **데이터 단위**: 5cm/5kg 단위로 집계 (개인식별 방지)

---

## 2. 컬럼 정의

### 2.1 기본 정보 (4개)

| 컬럼명         | 영문명         | 타입        | 설명             | 예시           | 비고          |
| -------------- | -------------- | ----------- | ---------------- | -------------- | ------------- |
| 기준년도       | reference_year | INT         | 검진 연도        | 2024           | 고정값        |
| 가입자일련번호 | subscriber_id  | VARCHAR(20) | 비식별화 ID      | A1234567       | Surrogate key |
| 시도코드       | province_code  | INT         | 거주지 시도 코드 | 11 (서울)      | 11~50         |
| 성별코드       | gender_code    | INT         | 성별             | 1 (남), 2 (여) | 1 or 2        |

**처리 규칙**:

- `가입자일련번호`: 개인식별 불가, 중복 가능 (연도별 별도 ID)
- `시도코드`: 통계 목적 외 미사용
- `성별코드`: 1=남성, 2=여성으로 매핑

---

### 2.2 인구통계 (1개)

| 컬럼명              | 영문명         | 타입 | 설명            | 범위                      | 비고 |
| ------------------- | -------------- | ---- | --------------- | ------------------------- | ---- |
| 연령대코드(5세단위) | age_group_code | INT  | 5세 단위 연령대 | 5 (25-29세) ~ 18 (90세+) | 5~18 |

**처리 규칙**:

- **코드 매핑** (국민건강보험공단 NHIS 기준):
  - 5: 25-29세
  - 6: 30-34세
  - 7: 35-39세
  - 8: 40-44세
  - 9: 45-49세
  - 10: 50-54세
  - 11: 55-59세
  - 12: 60-64세
  - 13: 65-69세
  - 14: 70-74세
  - 15: 75-79세
  - 16: 80-84세
  - 17: 85-89세
  - 18: 90세 이상 (초과)

---

### 2.3 신체 계측 (3개)

| 컬럼명        | 영문명              | 타입 | 단위 | 범위    | 비고          |
| ------------- | ------------------- | ---- | ---- | ------- | ------------- |
| 신장(5cm단위) | height              | INT  | cm   | 145~190 | 5cm 단위 집계 |
| 체중(5kg단위) | weight              | INT  | kg   | 40~120  | 5kg 단위 집계 |
| 허리둘레      | waist_circumference | INT  | cm   | 60~130  | -             |

**처리 규칙**:

- **BMI 계산**: `weight / (height/100)^2`
- **이상치 제거**:
  - 신장 < 140 or > 200 → invalid
  - 체중 < 30 or > 150 → invalid
  - 허리둘레 < 50 or > 150 → invalid

---

### 2.4 시력 및 청력 (4개)

| 컬럼명   | 영문명        | 타입  | 설명      | 범위               | 사용 |
| -------- | ------------- | ----- | --------- | ------------------ | ---- |
| 시력(좌) | vision_left   | FLOAT | 좌안 시력 | 0.1~2.0            | ❌   |
| 시력(우) | vision_right  | FLOAT | 우안 시력 | 0.1~2.0            | ❌   |
| 청력(좌) | hearing_left  | INT   | 좌측 청력 | 1 (정상), 2 (이상) | ❌   |
| 청력(우) | hearing_right | INT   | 우측 청력 | 1 (정상), 2 (이상) | ❌   |

**처리 규칙**:

- **프로젝트 미사용**: 위험요인 판정에 불필요
- raw 테이블에는 저장, clean 테이블에서 제외

---

### 2.5 혈압 (2개) ⭐

| 컬럼명     | 영문명       | 타입 | 단위 | 정상 범위 | 위험 기준 |
| ---------- | ------------ | ---- | ---- | --------- | --------- |
| 수축기혈압 | systolic_bp  | INT  | mmHg | 90~139    | ≥140      |
| 이완기혈압 | diastolic_bp | INT  | mmHg | 60~89     | ≥90       |

**처리 규칙**:

- **이상치 제거**:
  - 수축기 < 70 or > 250 → invalid
  - 이완기 < 40 or > 150 → invalid
- **위험요인 판정**:
  - `flag_hypertension = (수축기 ≥ 140) OR (이완기 ≥ 90)`
  - **출처**: 대한고혈압학회 진단 기준

---

### 2.6 혈액검사 - 당 (1개) ⭐

| 컬럼명             | 영문명          | 타입 | 단위  | 정상 범위 | 위험 기준 |
| ------------------ | --------------- | ---- | ----- | --------- | --------- |
| 식전혈당(공복혈당) | fasting_glucose | INT  | mg/dL | 70~99     | ≥126      |

**처리 규칙**:

- **이상치 제거**:
  - < 50 or > 400 → invalid
- **위험요인 판정**:
  - `flag_diabetes = (공복혈당 ≥ 126)`
  - **출처**: 대한당뇨병학회, ADA 진단 기준

---

### 2.7 혈액검사 - 지질 (4개) ⭐

| 컬럼명           | 영문명            | 타입 | 단위  | 정상 범위 | 위험 기준  |
| ---------------- | ----------------- | ---- | ----- | --------- | ---------- |
| 총콜레스테롤     | total_cholesterol | INT  | mg/dL | <200      | ≥240       |
| 트리글리세라이드 | triglycerides     | INT  | mg/dL | <150      | ≥200       |
| HDL콜레스테롤    | hdl_cholesterol   | INT  | mg/dL | ≥40       | <40        |
| LDL콜레스테롤    | ldl_cholesterol   | INT  | mg/dL | <130      | 사용 안 함 |

**처리 규칙**:

- **이상치 제거**:
  - 총콜레스테롤 < 100 or > 400 → invalid
  - TG < 30 or > 500 → invalid
  - HDL < 20 or > 100 → invalid
- **위험요인 판정**:
  - `flag_tc_high = (총콜레스테롤 ≥ 240)`
  - `flag_tg_high = (트리글리세라이드 ≥ 200)`
  - `flag_hdl_low = (HDL < 40)`
  - **출처**: NCEP ATP III 분류 기준
- **LDL**: 참고용만, 위험요인 판정 미사용

---

### 2.8 혈액검사 - 기타 (5개)

| 컬럼명          | 영문명           | 타입  | 단위  | 정상 범위          | 사용 |
| --------------- | ---------------- | ----- | ----- | ------------------ | ---- |
| 혈색소          | hemoglobin       | FLOAT | g/dL  | 남 13~17, 여 12~16 | ❌   |
| 요단백          | urine_protein    | INT   | -     | 1~6 (음성~4+)      | ❌   |
| 혈청크레아티닌  | serum_creatinine | FLOAT | mg/dL | 0.6~1.2            | ❌   |
| 혈청지오티(AST) | ast              | INT   | IU/L  | 0~40               | ❌   |
| 혈청지피티(ALT) | alt              | INT   | IU/L  | 0~40               | ❌   |
| 감마지티피      | ggt              | INT   | IU/L  | 0~50               | ❌   |

**처리 규칙**:

- **프로젝트 미사용**: 위험요인 판정에 불필요
- raw 테이블에는 저장, clean 테이블에서 제외

---

### 2.9 생활습관 (2개) ⭐

| 컬럼명   | 영문명          | 타입 | 코드 | 설명                                |
| -------- | --------------- | ---- | ---- | ----------------------------------- |
| 흡연상태 | smoking_status  | INT  | 1~3  | 1: 비흡연, 2: 과거흡연, 3: 현재흡연 |
| 음주여부 | drinking_status | INT  | 0~1  | 0: 비음주, 1: 음주                  |

**처리 규칙**:

- **흡연상태 매핑**:
  - 1: 비흡연 (never)
  - 2: 과거흡연 (former)
  - 3: 현재흡연 (current)
- **위험요인 판정**:
  - `flag_smoking = (흡연상태 == 3)`
  - **출처**: NCEP ATP III 주요 위험요인
- **음주여부**: 프로젝트 미사용 (가이드라인 기준 불명확)

---

### 2.10 구강검진 (6개)

| 컬럼명                | 영문명          | 타입 | 사용 |
| --------------------- | --------------- | ---- | ---- |
| 구강검진수검여부      | oral_exam       | INT  | ❌   |
| 치아우식증유무        | dental_caries   | INT  | ❌   |
| 결손치유무            | missing_teeth   | INT  | ❌   |
| 치아마모증유무        | tooth_wear      | INT  | ❌   |
| 제3대구치(사랑니)이상 | wisdom_teeth    | INT  | ❌   |
| 치석                  | dental_calculus | INT  | ❌   |

**처리 규칙**:

- **프로젝트 미사용**: 심혈관 위험요인과 무관
- raw 테이블에는 저장, clean 테이블에서 제외

---

## 3. 데이터 품질 규칙

### 3.1 결측값 처리

| 컬럼             | 결측 처리            | 이유               |
| ---------------- | -------------------- | ------------------ |
| 혈압, 혈당, 지질 | `invalid_flag=True`  | 위험요인 판정 불가 |
| 신장, 체중       | `invalid_flag=True`  | BMI 계산 불가      |
| 흡연             | `NULL` → 비흡연 간주 | 보수적 접근        |
| 기타             | 그대로 저장          | 판정에 미사용      |

### 3.2 이상치 정의

**생물학적 범위 벗어남**:

- 혈압: 수축기 <70 or >250, 이완기 <40 or >150
- 혈당: <50 or >400
- 총콜레스테롤: <100 or >400
- 신장: <140 or >200
- 체중: <30 or >150

**처리**:

- `invalid_flag=True` 설정
- clean 테이블 통계에서 제외
- raw 테이블에는 보존 (추후 재처리 가능)

### 3.3 단위 정규화

| 컬럼 | 원본 단위                | 저장 단위 | 변환                          |
| ---- | ------------------------ | --------- | ----------------------------- |
| 신장 | 5cm 단위 (145, 150, ...) | cm        | 그대로                        |
| 체중 | 5kg 단위 (40, 45, ...)   | kg        | 그대로                        |
| BMI  | -                        | kg/m²     | 계산: weight / (height/100)^2 |

---

## 4. ETL 매핑

### 4.1 raw_health_check 테이블

**포함 컬럼 (17개)**:

```
id (자동 생성),
reference_year, subscriber_id, province_code, gender_code, age_group_code,
height, weight, waist_circumference,
systolic_bp, diastolic_bp,
fasting_glucose,
total_cholesterol, triglycerides, hdl_cholesterol, ldl_cholesterol,
smoking_status
```

**제외 컬럼**: 시력, 청력, 구강, 혈액검사 기타

### 4.2 clean_risk_result 테이블

**포함 컬럼 (14개)**:

```
id, raw_id (FK),
bmi (계산),
flag_hypertension, flag_diabetes, flag_tc_high, flag_tg_high, flag_hdl_low, flag_obesity, flag_smoking (판정),
risk_factor_count (합산),
risk_group (분류),
rule_version, inference_time_ms, invalid_flag, created_at
```

---

## 5. 코드 매핑 참조

### 시도코드

```python
PROVINCE_CODES = {
    11: '서울', 21: '부산', 22: '대구', 23: '인천', 24: '광주',
    25: '대전', 26: '울산', 29: '세종', 31: '경기', 32: '강원',
    33: '충북', 34: '충남', 35: '전북', 36: '전남', 37: '경북',
    38: '경남', 39: '제주', 50: '기타'
}
```

### 성별코드

```python
GENDER_CODES = {1: '남성', 2: '여성'}
```

### 흡연상태

```python
SMOKING_STATUS = {
    1: 'never',    # 비흡연
    2: 'former',   # 과거흡연
    3: 'current'   # 현재흡연
}
```

---

## 6. 요약

- **전체 컬럼**: 33개
- **프로젝트 사용**: 17개 (raw), 14개 (clean)
- **위험요인 판정**: 7개 (고혈압, 당뇨, TC, TG, HDL, 비만, 흡연)
- **인코딩**: cp949 (한글 컬럼명)
- **품질 규칙**: 이상치 제거, 결측 플래그, 생물학적 범위 검증

---

**참고**: 실제 ETL 구현 시 이 문서를 참조하여 컬럼 매핑 및 데이터 검증 로직을 작성합니다.
